<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>vortexFx-pinouts</title>
  </head>
  <body>
    <h2> Vortex Led FX controller </h2>
    <hr>
    <h3>2025 Quest</h3>
    <p>Unfortunately the table below was ordered before the board was looked at. The central column below is the number marked on the breadboard </p>
    <table border="1">
      <caption>Dwarven Mines Usage </caption>
      <tbody>
        <tr>
          <td>boss</td>
          <td>worker</td>
          <td rowspan="1" colspan="3" style="text-align: center; background-color: white;">antenna end</td>
          <td>worker</td>
          <td>boss</td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td><br>
          </td>
          <td>EN/reset-</td>
          <td>15</td>
          <td>D23</td>
          <td>EL-7<br>
          </td>
          <td>force solved input, contact</td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td><br>
          </td>
          <td>D36</td>
          <td>14</td>
          <td>D22</td>
          <td>EL-6<br>
          </td>
          <td>run/reset bistable switch<br>
          </td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td><br>
          </td>
          <td>D39</td>
          <td>13</td>
          <td>D1</td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td><br>
          </td>
          <td>D34</td>
          <td>12</td>
          <td>D3</td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td><br>
          </td>
          <td>D35</td>
          <td>11</td>
          <td>D21</td>
          <td>EL-5<br>
          </td>
          <td>lever input, contact</td>
        </tr>
        <tr>
          <td>relay 4/4</td>
          <td><br>
          </td>
          <td>D32</td>
          <td>10</td>
          <td>D19</td>
          <td>EL-4<br>
          </td>
          <td>lever input, contact </td>
        </tr>
        <tr>
          <td>relay 3/4</td>
          <td><br>
          </td>
          <td>D33</td>
          <td>9</td>
          <td>D18</td>
          <td>EL-3<br>
          </td>
          <td>lever input, contact </td>
        </tr>
        <tr>
          <td><em>seemed broken<br>
            </em></td>
          <td><br>
          </td>
          <td>D25</td>
          <td>8</td>
          <td>D5</td>
          <td><br>
          </td>
          <td>lever input, contact </td>
        </tr>
        <tr>
          <td>relay 1/4</td>
          <td><br>
          </td>
          <td>D26</td>
          <td>7</td>
          <td>D17</td>
          <td>EL-2<br>
          </td>
          <td>lever input, contact </td>
        </tr>
        <tr>
          <td>relay 2/4<br>
          </td>
          <td><br>
          </td>
          <td>D27</td>
          <td>6</td>
          <td>D16</td>
          <td>EL-1<br>
          </td>
          <td>lever input, contact </td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td><br>
          </td>
          <td>D14</td>
          <td>5</td>
          <td>D4</td>
          <td>EL-0<br>
          </td>
          <td>run/reset</td>
        </tr>
        <tr>
          <td>?audio also?<br>
          </td>
          <td><br>
          </td>
          <td>D12</td>
          <td>4</td>
          <td>D2/LED</td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td>WS2811 driver</td>
          <td>D13</td>
          <td>3</td>
          <td>D15</td>
          <td>gnd (Role)<br>
          </td>
          <td>3.3V (Role)<br>
          </td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td><br>
          </td>
          <td>gnd</td>
          <td>2</td>
          <td>gnd</td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td><br>
          </td>
          <td>VIN</td>
          <td>1</td>
          <td>3.3V</td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td><br>
          </td>
          <td rowspan="1" colspan="3" style="text-align: center; background-color: white;">usb/buttons end<br>
          </td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td><br>
          </td>
          <td><br>
          </td>
          <td><br>
          </td>
          <td><br>
          </td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
      </tbody>
    </table>
    <br>
    <table border="1">
      <caption>remote gpio: Dwarven Mines Usage </caption>
      <tbody>
        <tr>
          <td>gpio</td>
          <td rowspan="1" colspan="3" style="text-align: center; background-color: white;">antenna end</td>
          <td>gpio</td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td>VP</td>
          <td>13</td>
          <td>3.3V</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td>VN</td>
          <td>12</td>
          <td>D22/LED</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td>EN/reset-</td>
          <td>11</td>
          <td>D19</td>
          <td>lever</td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td>D34*</td>
          <td>10</td>
          <td>D23</td>
          <td>lever</td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td>D35*</td>
          <td>9</td>
          <td>D18</td>
          <td>lever</td>
        </tr>
        <tr>
          <td>solve</td>
          <td>D32</td>
          <td>8</td>
          <td>D5</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>run</td>
          <td>D33</td>
          <td>7</td>
          <td>D17</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>lever<br>
          </td>
          <td>D25</td>
          <td>6</td>
          <td>D16</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>lever<br>
          </td>
          <td>D26</td>
          <td>5</td>
          <td>D4</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>lever<br>
          </td>
          <td>D27</td>
          <td>4</td>
          <td>D0</td>
          <td><em>(force boot)</em><br>
          </td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td>D14</td>
          <td>3</td>
          <td>D2</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>gnd(role?)<br>
          </td>
          <td>D12</td>
          <td>2</td>
          <td>D15</td>
          <td>gnd (role?) </td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td>gnd</td>
          <td>1</td>
          <td>D13</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td rowspan="1" colspan="3" style="text-align: center; background-color: white;">usb/buttons end<br>
          </td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td><br>
          </td>
          <td><br>
          </td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
      </tbody>
    </table>
    <br>
    <br>
    boss and worker are Devkit-1, remote_gpio is lolin32 (had 5 in hand and only 1 more Devkit-1). Lolin32 is different pinout.<br>
    <br>
    Changes of boss since Haunt2024:<br>
    <ol>
      <li> Rewired to add 5 more inputs beside the former trigger. These are pulled up at the processor.</li>
      <li>The connector that was the trigger is now the run/reset</li>
      <li>on boss gpio15 is jumpered low, on worker it is jumpered high/internal pullup trusted. </li>
      <li>D13 was for a while run to WS281x connector, for testing LED string during software development when power comes over USB, reconnection state is unknown</li>
    </ol>
    <p>Debug commands:&nbsp; (updated 29mar2025)</p>
    <table style="width: 100%" border="1">
      <tbody>
        <tr>
          <td><br>
          </td>
          <td>?</td>
          <td>list some of these commands</td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td><br>
            (space)</td>
          <td>list much of the state, especially last LED alteration command sent or received.</td>
        </tr>
        <tr>
          <td>station number (0..5)</td>
          <td>s</td>
          <td>set the latch on the selected station</td>
        </tr>
        <tr>
          <td>ditto</td>
          <td>u</td>
          <td>clear the latch on the selected station</td>
        </tr>
        <tr>
          <td>ditto</td>
          <td>l</td>
          <td>trace events on this station</td>
        </tr>
        <tr>
          <td>milliseconds</td>
          <td>t</td>
          <td>if T then set timebomb to go off at given milliseconds, else number is ignored and state of timer is displayed</td>
        </tr>
        <tr>
          <td>trace number 0..4<br>
          </td>
          <td>d</td>
          <td>set diagnostic spew, lower case is off, upper case is on.</td>
        </tr>
        <tr>
          <td>milliseconds? seconds?<br>
          </td>
          <td>f</td>
          <td>frame rate, maximum rate at which LED's are updated.</td>
        </tr>
        <tr>
          <td>[steps], period</td>
          <td>k</td>
          <td>background illumination parameters.</td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td>m</td>
          <td>show MACid, and boss and worker pointers</td>
        </tr>
        <tr>
          <td>0,1,2</td>
          <td>n</td>
          <td>debug booleans for BroadcastNode, neiter, errors, both</td>
        </tr>
        <tr>
          <td>(soon) 0:Led, 1..4 a relay</td>
          <td>o</td>
          <td>play with a known output. Doesn't disable program logic just does an immediate set or clear depending upon o vs O.<br>
            ~ board LED</td>
        </tr>
        <tr>
          <td>device pin number</td>
          <td>i</td>
          <td>set pin to input, if upper case then pull it up, else whatever 'INPUT' gets you.<br>
            Reads input, probably should put a bit of a delay in here but that is against company policy.</td>
        </tr>
        <tr>
          <td>device pin number<br>
          </td>
          <td>p</td>
          <td>Dangerous, will be removed soon! turns designated pin into an output which can disrupt the processor if you choose unwisely.<br>
            p is make low, P is make high</td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td>q</td>
          <td>list relay state and associated pin numbers</td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td>w</td>
          <td>test LED styles, exactly how keeps on changing, don't be surprised if this does nothing.</td>
        </tr>
        <tr>
          <td>any number</td>
          <td>x</td>
          <td>sets unused 'clistate.workerIndex', available for quick attachment for a quick hack</td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td>z</td>
          <td>rate at which LED's are refreshed to their expected state<br>
            ~ or 0 disables refresh</td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td>*</td>
          <td>list pin assignments</td>
        </tr>
        <tr>
          <td>seconds (or so) until restart<br>
          </td>
          <td>^Z</td>
          <td>restart processor, after a delay in seconds.</td>
        </tr>
        <tr>
          <td>integer<br>
          </td>
          <td>.<br>
            (period)</td>
          <td>~0: reset puzzle,<br>
            0: update lever to LED state and report, <br>
            1: trigger "puzzle solved" behavior.<br>
            2: act like timeout</td>
        </tr>
        <tr>
          <td>station number</td>
          <td>c</td>
          <td>copy tester color to a station, use '.' to apply it.<br>
            ~ sets background illumination color, apply it.</td>
        </tr>
        <tr>
          <td>0..255 or #00 to #ff</td>
          <td>r,g,b</td>
          <td>diddle a color, may or may not apply nominal max_brightness, which was set to save battery life.<br>
            does a "set all" upon each change.</td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td>/-\<br>
          </td>
          <td>modify test pattern<br>
          </td>
        </tr>
        <tr>
          <td>sequence number, if 0 increment preset one<br>
          </td>
          <td>=<br>
          </td>
          <td>resend last LED pattern, with given sequence number.&nbsp; <br>
          </td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td>!</td>
          <td>start OTA update, support is incomplete so this really doesn't do anything except may tank the processor.</td>
        </tr>
      </tbody>
    </table>
    <ol>
    </ol>
    <br>
    <hr>
    <h3>2024 Haunt</h3>
    The WS2811 driver output was wired to 4 strands in parallel, with a physical offset to aid in the spiraling.<br>
    The worker EL lights were never deployed.<br>
    <br>
    <table border="1">
      <caption>Time Tunnel Usage </caption>
      <tbody>
        <tr>
          <td>boss</td>
          <td>worker</td>
          <td rowspan="1" colspan="3" style="text-align: center; background-color: white;">&nbsp;antenna end </td>
          <td>worker</td>
          <td>boss</td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td><br>
          </td>
          <td>EN/reset-</td>
          <td>15</td>
          <td>D23</td>
          <td>EL-7</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td><br>
          </td>
          <td>D36</td>
          <td>14</td>
          <td>D22</td>
          <td>EL-6</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td><br>
          </td>
          <td>D39</td>
          <td>13</td>
          <td>D1</td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td><br>
          </td>
          <td>D34</td>
          <td>12</td>
          <td>D3</td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td><br>
          </td>
          <td>D35</td>
          <td>11</td>
          <td>D21</td>
          <td>EL-5</td>
          <td><em>audio trigger out (100 ms pulse)</em></td>
        </tr>
        <tr>
          <td>relay 4/4</td>
          <td><br>
          </td>
          <td>D32</td>
          <td>10</td>
          <td>D19</td>
          <td>EL-4</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>relay 3/4</td>
          <td><br>
          </td>
          <td>D33</td>
          <td>9</td>
          <td>D18</td>
          <td>EL-3</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>relay 2/4</td>
          <td><br>
          </td>
          <td>D25</td>
          <td>8</td>
          <td>D5</td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>relay 1/4</td>
          <td><br>
          </td>
          <td>D26</td>
          <td>7</td>
          <td>D17</td>
          <td>EL-2</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td><br>
          </td>
          <td>D27</td>
          <td>6</td>
          <td>D16</td>
          <td>EL-1</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td><br>
          </td>
          <td>D14</td>
          <td>5</td>
          <td>D4</td>
          <td>EL-0</td>
          <td>trigger input</td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td><br>
          </td>
          <td>D12</td>
          <td>4</td>
          <td>D2/LED</td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td>WS2811 driver</td>
          <td>D13</td>
          <td>3</td>
          <td>D15</td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td><br>
          </td>
          <td>gnd</td>
          <td>2</td>
          <td>gnd</td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td><br>
          </td>
          <td>VIN</td>
          <td>1</td>
          <td>3.3V</td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td><br>
          </td>
          <td style="height: 23px; text-align: center; background-color: white;"
            rowspan="1" colspan="3">usb/buttons end<br>
          </td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td><br>
          </td>
          <td><br>
          </td>
          <td><br>
          </td>
          <td><br>
          </td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
      </tbody>
    </table>
    No wire was found for audio trigger<br>
    <hr>The official git repo for this file is at the moment Andy's 980f/sketchbook/dwarvenMines, it really needs to be in Scare's repos somewhere.
  </body>
</html>
